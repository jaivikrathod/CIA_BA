import{g as D,r as c,w as m,i as g,u as A,j as i}from"./index-CpLtnvQD.js";import{u as C}from"./index.esm-BXEEmO5K.js";import{u as h,y as t,L as S}from"./DefaultLayout-C0e-1Rj5.js";import"./index-t--hEgTQ.js";function w(){var n;const o=D(),[p,y]=c.useState([]),{register:l,handleSubmit:b,formState:{errors:r}}=C(),{id:E}=m(),{common_id:q}=m(),N=((n=g().state)==null?void 0:n.type)||!1,P=A(e=>e.id),a=h();c.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await a.get("/agent-list");e.data.success?y(e.data.data):t.error("Error while fetching agents")}catch(e){t.error(e.response.data.message)}},v=async e=>{var d,u;try{if(e.id=E,e.userID=P,N)if(e.common_id=q,(await a.post("/common-general",e)).data.message)t.success("Form submitted successfully!"),o("/insurance");else throw new Error("Submission failed");else if((await a.post("/common-general",e)).data.message)t.success("Form submitted successfully!"),o("/insurance");else throw new Error("Submission failed")}catch(s){console.log(s),t.error(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"An error occurred while submitting the form.")}},T=[{label:"IDV",type:"text",id:"IDV",validation:{required:"IDV is required"}},{label:"Current NCB",type:"text",id:"CURRENTNCB",validation:{required:"Current NCB is required"}},{label:"Insurance",type:"text",id:"INSURANCE",validation:{required:"Insurance is required"}},{label:"Policy No",type:"text",id:"POLICYNO",validation:{required:"Policy No is required"}},{label:"OD Premium",type:"text",id:"ODPREMIUM",validation:{required:"OD Premium is required"}},{label:"TP Premium",type:"text",id:"TPPREMIUM",validation:{required:"TP Premium is required"}},{label:"Package Premium",type:"text",id:"PACKAGEPREMIUM",validation:{required:"Package Premium is required"}},{label:"GST",type:"text",id:"GST",validation:{required:"GST is required"}},{label:"Premium",type:"text",id:"PREMIUM",validation:{required:"Premium is required"}},{label:"Collection Date",type:"date",id:"COLLECTIONDATE",validation:{required:"Collection Date is required"}},{label:"Cases Type",type:"text",id:"CASESTYPE",validation:{required:"Cases Type is required"}},{label:"Exe Name",type:"text",id:"EXENAME",validation:{required:"Exe Name is required"}},{label:"Payment Mode",type:"text",id:"PAYMENTMODE",validation:{required:"Payment Mode is required"}},{label:"New Policy Start Date",type:"date",id:"NEWPOLICYSTARTDATE",validation:{required:"Start Date is required"}},{label:"New Policy Expiry Date",type:"date",id:"NEWPOLICYEXPIRYDATE",validation:{required:"Expiry Date is required"}},{label:"Payout Percent",type:"number",id:"PAYOUTPERCCENT",validation:{required:"Payout Percent is required"}},{label:"Amount",type:"number",id:"AMMOUNT",validation:{required:"Amount is required"}},{label:"TDS",type:"number",id:"TDS",validation:{required:"TDS is required"}}];return i.jsxs(i.Fragment,{children:[i.jsxs("form",{className:"container mt-5",onSubmit:b(v),children:[i.jsxs("div",{className:"row g-3",children:[T.map(e=>i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{htmlFor:e.id,className:"form-label",children:e.label}),i.jsx("input",{type:e.type,id:e.id,className:`form-control ${r[e.id]?"is-invalid":""}`,...l(e.id,e.validation)}),r[e.id]&&i.jsx("div",{className:"invalid-feedback",children:r[e.id].message})]},e.id)),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{htmlFor:"AGNTCODE",className:"form-label",children:"Agent"}),i.jsxs("select",{id:"AGNTCODE",className:`form-select ${r.AGNTCODE?"is-invalid":""}`,...l("AGNTCODE",{required:"Agent is required"}),children:[i.jsx("option",{value:"",children:"Select Agent"}),p.map(e=>i.jsx("option",{value:e.id,children:e.full_name},e.id))]}),r.AGNTCODE&&i.jsx("div",{className:"invalid-feedback",children:r.AGNTCODE.message})]})]}),i.jsx("button",{type:"submit",className:"btn btn-primary mt-3",children:"Submit"})]}),i.jsx(S,{})]})}export{w as default};
