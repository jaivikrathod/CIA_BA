import{g as M,u as P,r as l,w as R,j as e}from"./index-BN8hKp7N.js";import{u as V}from"./index.esm-BXp1b-Ih.js";import{u as k,L as q,y as d}from"./DefaultLayout-gdVRfkwL.js";import"./index-t--hEgTQ.js";function B(){const u=M(),p=P(s=>s.id),[a,h]=l.useState(1),[O,A]=l.useState({insuranceType:"",segmentType:"",twoWheelerType:"",detailedType:""}),{register:n,handleSubmit:j,reset:F,formState:{errors:r,isSubmitting:y},watch:i}=V();let{id:b}=R();const m=[{Heading:"SA OD",value:"SAOD"},{Heading:"Third Party",value:"ThirdParty"},{Heading:"Comprehensive",value:"COMPREHENSIVE"},{Heading:"New Vehicle",value:"NewVehicle"}],N=[{Heading:"PCV[Taxi, Rikshaw]",value:"PCV"},{Heading:"GCV [Truck,mini truck]",value:"GCV"},{Heading:"MISD [Ambulance, Elavator]",value:"MISD"}],w=[{Heading:"Halth Insurance",value:"Health Insurance"},{Heading:"Life Insurance",value:"Life Insurance"},{Heading:"WC Insurance",value:"WC Insurance"},{Heading:"PA cover",value:"PA cover"},{Heading:"Travel Insurance",value:"Travel Insurance"},{Heading:"Fire Insurance",value:"Fire Insurance"},{Heading:"Marine Insurance",value:"Marine Insurance"}],C=[{Heading:"Private Car",value:"Private Car"},{Heading:"Two Wheeler",value:"Two Wheeler"},{Heading:"Commercial",value:"Commercial"}],[S,g]=l.useState(m),[I,x]=l.useState(m),f=k(),o=i("insuranceType"),c=i("segmentType"),H=i("twoWheelerType"),W=i("detailedType"),[D,v]=l.useState(!1);l.useEffect(()=>{x(c==="Commercial"?N:m),o==="Non-Motor"?(g(w),v(!0)):(g(C),v(!1))},[c,o]);const T=async()=>{if(D&&a==2){let s={insuranceType:o,segmentType:c,twoWheelerType:"-",detailedType:"-",customerID:b,userID:p};try{const t=await f.post("/fill-initial-details",s);t.data.success?u(`/common-insurance2/${t.data.id}/null`):d.error("Error while filling initial details")}catch{d.error("Error while filling initial details")}}if(a<3)h(a+1);else{let s={insuranceType:o,segmentType:c,twoWheelerType:H,detailedType:W,customerID:b,userID:p};try{const t=await f.post("/fill-initial-details",s);t.data.success?u(`/common-insurance1/${t.data.id}`):d.error("Error while filling initial details")}catch{d.error("Error while filling initial details")}}},E=()=>{a>1&&h(a-1)};return e.jsxs("div",{className:"container-fluid py-5",style:{backgroundColor:"#f8f9fa"},children:[e.jsx(q,{}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-lg-8 col-md-10",children:e.jsx("div",{className:"card border-0 shadow-sm",children:e.jsxs("div",{className:"card-body p-4 p-md-5",children:[e.jsx("h2",{className:"text-center mb-4",style:{color:"#2c3e50",fontWeight:"600"},children:"Insurance Details"}),e.jsxs("form",{onSubmit:j(T),className:"mt-4",children:[a===1&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label fw-semibold mb-3",style:{color:"#2c3e50"},children:"Select Insurance Type"}),e.jsxs("select",{...n("insuranceType",{required:"Insurance type is required"}),className:"form-select form-select-lg border-2",style:{padding:"0.75rem 1rem",borderRadius:"8px",borderColor:r.insuranceType?"#dc3545":"#dee2e6"},children:[e.jsx("option",{value:"",children:"Choose insurance type"}),e.jsx("option",{value:"Motor",children:"Motor"}),e.jsx("option",{value:"Non-Motor",children:"Non-Motor"})]}),r.insuranceType&&e.jsx("div",{className:"text-danger mt-2 small",children:r.insuranceType.message})]}),a===2&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label fw-semibold mb-3",style:{color:"#2c3e50"},children:"Select Segment Type"}),e.jsxs("select",{...n("segmentType",{required:"Segment type is required"}),className:"form-select form-select-lg border-2",style:{padding:"0.75rem 1rem",borderRadius:"8px",borderColor:r.segmentType?"#dc3545":"#dee2e6"},children:[e.jsx("option",{value:"",children:"Choose segment type"}),S.map(s=>e.jsx("option",{value:s.value,children:s.Heading},s.value))]}),r.segmentType&&e.jsx("div",{className:"text-danger mt-2 small",children:r.segmentType.message})]}),a===3&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label fw-semibold mb-3",style:{color:"#2c3e50"},children:"Select Vehicle Type"}),e.jsxs("select",{...n("twoWheelerType",{required:"Vehicle type is required"}),className:"form-select form-select-lg border-2 mb-3",style:{padding:"0.75rem 1rem",borderRadius:"8px",borderColor:r.twoWheelerType?"#dc3545":"#dee2e6"},children:[e.jsx("option",{value:"",children:"Choose vehicle type"}),I.map(s=>e.jsx("option",{value:s.value,children:s.Heading},s.value))]}),r.twoWheelerType&&e.jsx("div",{className:"text-danger mt-2 small",children:r.twoWheelerType.message}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label fw-semibold mb-3",style:{color:"#2c3e50"},children:"Detailed Type"}),e.jsx("input",{type:"text",...n("detailedType",{required:"Detailed type is required"}),className:"form-control form-control-lg border-2",placeholder:"Enter detailed type",style:{padding:"0.75rem 1rem",borderRadius:"8px",borderColor:r.detailedType?"#dc3545":"#dee2e6"}}),r.detailedType&&e.jsx("div",{className:"text-danger mt-2 small",children:r.detailedType.message})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[a>1&&e.jsx("button",{type:"button",onClick:E,className:"btn btn-outline-secondary btn-lg px-4",style:{borderRadius:"8px",borderWidth:"2px",fontWeight:"500"},children:"Previous"}),a<3?e.jsx("button",{type:"button",onClick:T,className:"btn btn-primary btn-lg px-4 ms-auto",disabled:!i(a===1?"insuranceType":a===2?"segmentType":"twoWheelerType"),style:{borderRadius:"8px",backgroundColor:"#3498db",border:"none",fontWeight:"500"},children:"Next"}):e.jsx("button",{type:"submit",className:"btn btn-success btn-lg px-4 ms-auto",disabled:y,style:{borderRadius:"8px",backgroundColor:"#2ecc71",border:"none",fontWeight:"500"},children:y?"Submitting...":"Submit"})]})]})]})})})})]})}export{B as default};
