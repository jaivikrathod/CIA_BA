import{d as x,m as f,c as j,r as l,u as w,e as b,j as e,O as y,q as v,k as N,V as n}from"./index-CRICFKxU.js";import{F as k,a as S}from"./index-D6_T-aNF.js";import"./iconBase-K3-QF6rt.js";function I(){const d=x(t=>t.isAuthenticated),c=f(),i=j(),[o,m]=l.useState(!1);l.useEffect(()=>{d&&i("/dashboard")},[]);const p=w(),{register:r,handleSubmit:u,formState:{errors:a}}=b(),h=async t=>{try{const s=await p.post("/login",t);console.log(s.data),s.data.success?t.changePassword?i(`/change-password/${s.data.data.id}`):(window.localStorage.setItem("id",s.data.data.id),window.localStorage.setItem("token",s.data.data.token),c({type:"set",id:s.data.data.id,token:s.data.data.token,isAuthenticated:!0,username:s.data.data.full_name,adminType:s.data.data.type}),i("/dashboard")):n.error("Login failed. Please check your credentials.")}catch(s){console.log(s),n.error(s.response.data.message)}},g=()=>{m(!o)};return e.jsxs("div",{className:"login-container",children:[e.jsx(y,{position:"top-right",reverseOrder:!1}),e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("img",{src:v,alt:"Care Insurance Logo",className:"company-logo"}),e.jsx("h2",{children:"Welcome Back"}),e.jsx("p",{children:"Sign in to your account to continue"})]}),e.jsxs("form",{onSubmit:u(h),children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:["      ",e.jsx("i",{className:"bi bi-envelope absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none"}),e.jsx("input",{type:"email",className:`form-control pl-10 ${a.email?"is-invalid":""}`,placeholder:"Enter your email",...r("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})})]}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("label",{className:"form-label m-0",children:"Password"}),e.jsx("button",{type:"button",onClick:g,className:"","aria-label":o?"Hide password":"Show password",tabIndex:-1,style:{background:"white",color:"black",border:"none"},children:o?e.jsx(k,{size:18,className:"mb-2"}):e.jsx(S,{size:18})})]}),e.jsx("input",{type:o?"text":"password",className:`form-control ${a.password?"is-invalid":""}`,placeholder:"Enter your password",...r("password",{required:"Password is required"})}),a.password&&e.jsx("div",{className:"invalid-feedback",children:a.password.message})]}),e.jsx("button",{type:"submit",className:"login-btn",children:"Sign In"}),e.jsx("div",{className:"forgot-password",children:e.jsx(N,{to:"/forgot-password",children:"Forgot your password?"})})]})]})]})}export{I as default};
