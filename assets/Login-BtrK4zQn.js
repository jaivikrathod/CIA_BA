import{u as o,n as u,g as h,r as x,j as e}from"./index-BN8hKp7N.js";import{u as g}from"./index.esm-BXp1b-Ih.js";import{a as j}from"./index-t--hEgTQ.js";import{O as b,V as l}from"./index-CsU9V8LM.js";function y(){const n=o(r=>r.apiUrl),d=o(r=>r.isAuthenticated),c=u(),i=h();x.useEffect(()=>{d&&i("/dashboard")},[]);const{register:t,handleSubmit:m,formState:{errors:a}}=g(),p=async r=>{try{const s=await j.post(n+"/login",r);s.data.success?(console.log(s.data),r.password=="Password@123"?i(`/change-password/${s.data.id}`):(window.localStorage.setItem("id",s.data.id),window.localStorage.setItem("token",s.data.token),c({type:"set",id:s.data.id,token:s.data.token,isAuthenticated:!0,username:s.data.full_name,adminType:s.data.type}),i("/dashboard"))):l.error("Login failed. Please check your credentials.")}catch(s){console.log(s),l.error("An error occurred. Please try again.")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex vh-100 align-items-center justify-content-center bg-light",children:[e.jsx(b,{position:"top-right",reverseOrder:!1}),e.jsx("div",{className:"w-100",style:{maxWidth:"400px"},children:e.jsxs("div",{className:"card shadow-sm p-4",children:[e.jsx("h2",{className:"text-center mb-4",children:"Welcome Back"}),e.jsxs("form",{onSubmit:m(p),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-primary text-white",children:e.jsx("i",{className:"bi bi-person"})}),e.jsx("input",{type:"text",className:`form-control ${a.email?"is-invalid":""}`,placeholder:"Enter email",...t("email",{required:"Username/Email is required"})}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email.message})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-primary text-white",children:e.jsx("i",{className:"bi bi-lock"})}),e.jsx("input",{type:"password",className:`form-control ${a.password?"is-invalid":""}`,placeholder:"Enter your password",...t("password",{required:"Password is required"})}),a.password&&e.jsx("div",{className:"invalid-feedback",children:a.password.message})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})})]})]})})]})})}export{y as default};
