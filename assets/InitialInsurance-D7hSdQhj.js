import{c as W,d as k,s as L,u as R,r as i,e as G,j as e}from"./index-CRICFKxU.js";import{L as $,y as f}from"./DefaultLayout-C5VH_Vit.js";import"./iconBase-K3-QF6rt.js";function K(){const j=W(),N=k(s=>s.id),{id:v}=L(),g=R(),[a,o]=i.useState(1),[n,d]=i.useState(!1),[I,y]=i.useState([]),[S,_]=i.useState([]),[m,H]=i.useState(0),{register:l,handleSubmit:C,formState:{errors:t,isSubmitting:x,touchedFields:r},watch:c,reset:w}=G();i.useEffect(()=>{P(),o(1),d(!1)},[]);const P=async()=>{try{const s=await g.get("/getInitialInsuranceStatus",{params:{customer_id:v}});s.data.success&&(w(s.data.data),H(s.data.data.id))}catch(s){console.log(s.response.data.message)}},u=c("insurance_type"),h=c("segment"),M=c("segment_vehicle_type"),T=c("segment_vehicle_detail_type"),D=[{Heading:"SA OD",value:"SAOD"},{Heading:"Third Party",value:"ThirdParty"},{Heading:"Comprehensive",value:"COMPREHENSIVE"},{Heading:"New Vehicle",value:"NewVehicle"}],E=[{Heading:"PCV[Taxi, Rikshaw]",value:"PCV"},{Heading:"GCV [Truck,mini truck]",value:"GCV"},{Heading:"MISD [Ambulance, Elavator]",value:"MISD"}],V=[{Heading:"Health Insurance",value:"Health Insurance"},{Heading:"Life Insurance",value:"Life Insurance"},{Heading:"WC Insurance",value:"WC Insurance"},{Heading:"PA cover",value:"PA cover"},{Heading:"Travel Insurance",value:"Travel Insurance"},{Heading:"Fire Insurance",value:"Fire Insurance"},{Heading:"Marine Insurance",value:"Marine Insurance"}],q=[{Heading:"Private Car",value:"Private Car"},{Heading:"Two Wheeler",value:"Two Wheeler"},{Heading:"Commercial",value:"Commercial"}];i.useEffect(()=>{u==="Non-Motor"?(y(V),d(!0)):(y(q),d(!1)),_(h==="Commercial"?E:D)},[u,h]);const O=async()=>{if(!(n&&a===2||!n&&a===3))if(a<3){o(a+1);return}else return;const s={id:m,insurance_type:u,segment:h,segment_vehicle_type:n?"-":M,segment_vehicle_detail_type:n?"-":T,customer_id:v,user_id:N};try{const p=await g.post("/fill-initial-details",s);if(p.data.success){let b=m!=0?m:p.data.id;const F=n?`/common-insurance2/${b}/0`:`/common-insurance1/${b}`;j(F)}else f.error("Error while filling initial details")}catch{f.error("Error while filling initial details")}},A=()=>{a>1&&o(a-1)};return e.jsxs("div",{className:"container-fluid py-4",children:[e.jsx($,{}),e.jsx("div",{className:"initial-insurance",children:e.jsx("div",{className:"col-lg-6 col-md-8 mx-auto",children:e.jsx("div",{className:"card border-0 shadow-sm",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h2",{className:"text-center mb-4",style:{color:"#2c3e50",fontWeight:"600"},children:"Insurance Details"}),e.jsxs("form",{onSubmit:C(O),className:"mt-3",children:[a===1&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Select Insurance Type"}),e.jsxs("select",{...l("insurance_type",{required:"Insurance type is required"}),className:"form-select border-2",style:{borderColor:t.insurance_type?"#dc3545":"#dee2e6"},children:[e.jsx("option",{value:"",children:"Choose insurance type"}),e.jsx("option",{value:"Motor",children:"Motor"}),e.jsx("option",{value:"Non-Motor",children:"Non-Motor"})]}),t.insurance_type&&e.jsx("div",{className:"text-danger mt-1 small",children:t.insurance_type.message})]}),a===2&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Select Segment Type"}),e.jsxs("select",{...l("segment",{required:"Segment type is required"}),className:"form-select border-2",style:{borderColor:t.segment?"#dc3545":"#dee2e6"},children:[e.jsx("option",{value:"",children:"Choose segment type"}),I.map(s=>e.jsx("option",{value:s.value,children:s.Heading},s.value))]}),t.segment&&e.jsx("div",{className:"text-danger mt-1 small",children:t.segment.message})]}),a===3&&!n&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Select Vehicle Type"}),e.jsxs("select",{...l("segment_vehicle_type",{required:"Vehicle type is required"}),className:"form-select border-2",style:{borderColor:r.segment_vehicle_type&&t.segment_vehicle_type?"#dc3545":"#dee2e6"},children:[e.jsx("option",{value:"",children:"Choose vehicle type"}),S.map(s=>e.jsx("option",{value:s.value,children:s.Heading},s.value))]}),r.segment_vehicle_type&&t.segment_vehicle_type&&e.jsx("div",{className:"text-danger mt-1 small",children:t.segment_vehicle_type.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Detailed Type"}),e.jsx("input",{type:"text",...l("segment_vehicle_detail_type",{required:"Detailed type is required"}),className:"form-control border-2",placeholder:"Enter detailed type",style:{borderColor:r.segment_vehicle_detail_type&&t.segment_vehicle_detail_type?"#dc3545":"#dee2e6"}}),r.segment_vehicle_detail_type&&t.segment_vehicle_detail_type&&e.jsx("div",{className:"text-danger mt-1 small",children:t.segment_vehicle_detail_type.message})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-4",children:[a>1&&e.jsx("button",{type:"button",onClick:A,className:"btn btn-outline-secondary px-4",children:"Previous"}),e.jsx("button",{type:"submit",className:"btn btn-primary px-4 ms-auto",disabled:x,children:x?"Submitting...":"Next"})]})]})]})})})})]})}export{K as default};
