import{s as y,c as N,r as c,u as v,e as C,j as s,O as S,q as k,V as a}from"./index-CRICFKxU.js";import{F as m,a as w}from"./index-D6_T-aNF.js";import"./iconBase-K3-QF6rt.js";function z(){const{id:p}=y(),u=N(),[r,h]=c.useState(!1),[o,f]=c.useState(!1),g=v(),{register:t,handleSubmit:b,formState:{errors:e}}=C(),x=()=>{h(!r)},j=()=>{f(!o)},P=async n=>{var l,d;if(n.password!==n.confirmPassword){a.error("Passwords do not match");return}if(n.password==="Password@123"){a.error("New Password cannot be the default password");return}try{(await g.post(`/change-password/${p}`,{password:n.password})).data.success?(a.success("Password changed successfully"),u("/login")):a.error("Failed to change password")}catch(i){console.log(i),a.error(((d=(l=i.response)==null?void 0:l.data)==null?void 0:d.message)||"An error occurred. Please try again.")}};return s.jsxs("div",{className:"login-container",children:[s.jsx(S,{position:"top-right",reverseOrder:!1}),s.jsxs("div",{className:"login-card",children:[s.jsxs("div",{className:"login-header",children:[s.jsx("img",{src:k,alt:"Care Insurance Logo",className:"company-logo"}),s.jsx("h2",{children:"Change Password"}),s.jsx("p",{children:"Enter your new password to continue"})]}),s.jsxs("form",{onSubmit:b(P),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("label",{className:"form-label m-0",children:"New Password"}),s.jsx("button",{type:"button",onClick:x,className:"","aria-label":r?"Hide password":"Show password",tabIndex:-1,style:{background:"white",color:"black",border:"none"},children:r?s.jsx(m,{size:18,className:"mb-2"}):s.jsx(w,{size:18})})]}),s.jsx("input",{type:r?"text":"password",className:`form-control ${e.password?"is-invalid":""}`,placeholder:"Enter new password",...t("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),e.password&&s.jsx("div",{className:"invalid-feedback",children:e.password.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("label",{className:"form-label m-0",children:"Confirm Password"}),s.jsx("button",{type:"button",onClick:j,className:"","aria-label":o?"Hide password":"Show password",tabIndex:-1,style:{background:"white",color:"black",border:"none"},children:o?s.jsx(m,{size:18,className:"mb-2"}):s.jsx(w,{size:18})})]}),s.jsx("input",{type:o?"text":"password",className:`form-control ${e.confirmPassword?"is-invalid":""}`,placeholder:"Confirm new password",...t("confirmPassword",{required:"Confirm Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),e.confirmPassword&&s.jsx("div",{className:"invalid-feedback",children:e.confirmPassword.message})]}),s.jsx("button",{type:"submit",className:"login-btn",children:"Change Password"})]})]})]})}export{z as default};
