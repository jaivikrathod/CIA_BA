import{w as _,r as c,u as D,j as e}from"./index-BN8hKp7N.js";import{u as S,y as C,L as P,l as I,m as x,k as T,n as F,M}from"./DefaultLayout-gdVRfkwL.js";import"./index-t--hEgTQ.js";const k="/CIA_BA/assets/pdf2-BtyarKZu.png",U=()=>{const{id:j}=_(),[d,h]=c.useState(0),[l,t]=c.useState(!1),[o,p]=c.useState([]),N=S(),i=D(s=>s.apiUrl),[A,E]=c.useState(!1),[r,n]=c.useState({show:!1,id:null});c.useEffect(()=>{b()},[]);const b=async()=>{try{const s=await N.get("/particular-insurance",{params:{common_id:j}});p(s.data.data)}catch{C.error("Failed to fetch insurance details")}},u=async()=>{t(!1)},v=()=>{t(!1),b()},f=s=>{s.name.toLowerCase().endsWith(".pdf")?window.open(`${i}/get-insurance-docs/${s.name}`,"_blank"):window.open(`${i}/get-insurance-docs/${s.name}`,"_blank")},y=s=>{n({show:!0,id:s})},g=()=>{n({show:!1,id:null})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container mt-4",children:[e.jsx(P,{position:"top-right",autoClose:3e3,hideProgressBar:!0}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 insurance-detail-main",children:[e.jsx("h2",{children:"Insurance Details"}),e.jsx("div",{children:l?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-success me-2",onClick:u,children:[e.jsx(I,{className:"me-2"})," Save"]}),e.jsxs("button",{className:"btn btn-common btn-danger",onClick:v,children:[e.jsx(x,{className:"me-2"})," Cancel"]})]}):e.jsxs("button",{className:"btn btn-primary",onClick:()=>t(!0),children:[e.jsx(T,{className:"me-2"})," Edit"]})})]}),e.jsx("ul",{className:"nav nav-tabs mb-4",children:o.map((s,m)=>e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${d===m?"active":""}`,onClick:()=>h(m),children:["Insurance ",m+1]})},s.id))}),e.jsx("div",{className:"tab-content",children:o.map((s,m)=>e.jsx("div",{className:`tab-pane ${d===m?"active":""}`,children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Basic Information"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"Insurance Type"}),e.jsx("input",{type:"text",className:"form-control",value:s.insurance_type,disabled:!l})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"Business Type"}),e.jsx("input",{type:"text",className:"form-control",value:s.business_type,disabled:!l})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"Segment"}),e.jsx("input",{type:"text",className:"form-control",value:s.segment,disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Vehicle Information"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Vehicle Number"}),e.jsx("input",{type:"text",className:"form-control",value:s.vehicle_number,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Product Base"}),e.jsx("input",{type:"text",className:"form-control",value:s.product_base,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Manufacturer"}),e.jsx("input",{type:"text",className:"form-control",value:s.manufacturer,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Model"}),e.jsx("input",{type:"text",className:"form-control",value:s.model,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Fuel Type"}),e.jsx("input",{type:"text",className:"form-control",value:s.fuel_type,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Year of Manufacture"}),e.jsx("input",{type:"number",className:"form-control",value:s.year_of_manufacture,disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Policy Details"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Policy Number"}),e.jsx("input",{type:"text",className:"form-control",value:s.policy_no,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Insurance Company"}),e.jsx("input",{type:"text",className:"form-control",value:s.insurance_company,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"IDV"}),e.jsx("input",{type:"text",className:"form-control",value:s.idv,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Current NCB"}),e.jsx("input",{type:"text",className:"form-control",value:s.currentncb,disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Premium Details"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"OD Premium"}),e.jsx("input",{type:"number",className:"form-control",value:s.od_premium,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"TP Premium"}),e.jsx("input",{type:"number",className:"form-control",value:s.tp_premium,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Package Premium"}),e.jsx("input",{type:"number",className:"form-control",value:s.package_premium,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"GST"}),e.jsx("input",{type:"number",className:"form-control",value:s.gst,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Total Premium"}),e.jsx("input",{type:"number",className:"form-control",value:s.premium,disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Important Dates"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Policy Start Date"}),e.jsx("input",{type:"date",className:"form-control",value:new Date(s.policy_start_date).toISOString().split("T")[0],disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Policy Expiry Date"}),e.jsx("input",{type:"date",className:"form-control",value:new Date(s.policy_expiry_date).toISOString().split("T")[0],disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Collection Date"}),e.jsx("input",{type:"date",className:"form-control",value:new Date(s.collection_date).toISOString().split("T")[0],disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Insurance Date"}),e.jsx("input",{type:"date",className:"form-control",value:new Date(s.insurance_date).toISOString().split("T")[0],disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Payment Details"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Payment Mode"}),e.jsx("input",{type:"text",className:"form-control",value:s.payment_mode,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Case Type"}),e.jsx("input",{type:"text",className:"form-control",value:s.case_type,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Executive Name"}),e.jsx("input",{type:"text",className:"form-control",value:s.exe_name,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Agent Code"}),e.jsx("input",{type:"text",className:"form-control",value:s.agent_code,disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("h4",{className:"border-bottom pb-2",children:"Financial Details"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Payout Percent"}),e.jsx("input",{type:"number",className:"form-control",value:s.payout_percent,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Amount"}),e.jsx("input",{type:"number",className:"form-control",value:s.amount,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"TDS"}),e.jsx("input",{type:"number",className:"form-control",value:s.tds,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"TDS Amount"}),e.jsx("input",{type:"number",className:"form-control",value:s.tds_amount,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Payment Amount"}),e.jsx("input",{type:"number",className:"form-control",value:s.payment_amount,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Difference"}),e.jsx("input",{type:"number",className:"form-control",value:s.difference,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Final Agent"}),e.jsx("input",{type:"number",className:"form-control",value:s.final_agent,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Net Income"}),e.jsx("input",{type:"number",className:"form-control",value:s.net_income,disabled:!l})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"Payment Received"}),e.jsx("input",{type:"number",className:"form-control",value:s.payment_received,disabled:!l})]})]})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsxs("div",{className:"border-bottom pb-3 mb-4 d-flex align-items-center",children:[e.jsx("h4",{className:"mb-0",children:"Documents"}),e.jsx("div",{className:"ms-3",children:e.jsx("div",{onClick:()=>y(s.id),className:"d-flex justify-content-center align-items-center rounded-circle bg-primary",style:{width:"20px",height:"20px",cursor:"pointer"},children:e.jsx(F,{color:"white",size:10})})})]}),e.jsx("div",{className:"d-flex gap-5 flex-wrap",children:s.documents&&JSON.parse(s.documents).map((a,w)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-md-4 mb-3",children:e.jsx("div",{className:"card h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[a.name.toLowerCase().endsWith(".pdf")?e.jsx("div",{className:"position-relative",children:e.jsx("img",{src:k,alt:a.type,className:"img-thumbnail me-2",style:{width:"40px",height:"40px",objectFit:"cover"}})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"position-relative",children:e.jsx("img",{src:`${i}/get-insurance-docs/${a.name}`,alt:a.type,className:"img-thumbnail me-2",style:{width:"40px",height:"40px",objectFit:"cover"}})})}),e.jsx("div",{children:e.jsx("h6",{className:"card-title mb-0",children:a.type})})]}),e.jsx("button",{className:"btn btn-sm btn-outline-primary mt-2",onClick:()=>f(a),children:"View Document"}),e.jsx("div",{className:"ms-3",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center rounded-circle bg-danger position-absolute",style:{width:"20px",height:"20px",cursor:"pointer",top:"-8px",right:"-10px"},children:e.jsx(x,{color:"white",size:10})})})]})})},w)}))})]})]})},s.id))})]}),e.jsx(M,{customerId:r.id,show:r.show,isCustomerDoc:!1,handleClose:g})]})};export{U as default};
